{% extends 'base.html' %}
{% block title %}SeatScape - Home{% endblock %}
{% block nav_home_active %}active{% endblock %}
{% block content %}

   <!-- ==========Banner-Section========== -->
   <section class="banner-section">
    <div class="banner-bg bg_img bg-fixed" data-background="https://pixner.net/boleto/demo/assets/images/banner/banner01.jpg"></div>
    <div class="container">
        <div class="banner-content">
            <h1 class="title  cd-headline clip"><span class="d-block">book your</span> tickets for 
                <span class="color-theme cd-words-wrapper p-0 m-0">
                    <b class="is-visible">Event</b>
                    <b>Sports</b>
                    <b>Workshops</b>
                </span>
            </h1>
            <p>Safe, secure, reliable ticketing.Your ticket to live entertainment!</p>
        </div>
    </div>
</section>
<!-- ==========Banner-Section========== -->

<!-- ==========Event-Section========== -->
{% load get_item %}
<section class="event-section padding-top padding-bottom bg-four">
    <div class="container">
        <div class="tab">
            <div class="section-header-2">
                <div class="left">
                    <h2 class="title">featured Events</h2>
                    <p>Be sure not to miss these Event today.</p>
                </div>
            </div>
            <div class="tab-area mb-30-none">
                <div class="tab-item active">
                    <div class="owl-carousel owl-theme tab-slider">
                        {% for event in featured_events %}
                        <div class="item">
                            <div class="event-grid">
                                <div class="movie-thumb c-thumb">
                                    <a href="{% url 'event_detail' event.id %}">
                                        {% if event.image %}
                                            <img src="{{ event.image.url }}" alt="{{ event.name }}">
                                        {% elif event.image_url %}
                                            <img src="{{ event.image_url }}" alt="{{ event.name }}">
                                        {% else %}
                                            <img src="https://pixner.net/boleto/demo/assets/images/event/event01.jpg" alt="{{ event.name }}">
                                        {% endif %}
                                    </a>
                                    <div class="event-date">
                                        <h6 class="date-title">{{ event.date|date:"d" }}</h6>
                                        <span>{{ event.date|date:"M" }}</span>
                                    </div>
                                </div>
                                <div class="movie-content bg-one">
                                    <h5 class="title m-0">
                                        <a href="{% url 'event_detail' event.id %}">{{ event.name }}</a>
                                    </h5>
                                    <div class="movie-rating-percent">
                                        <span>{{ event.location }}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% empty %}
                        <p class="no-events">No upcoming events.</p>
                        {% endfor %}
                    </div>
                </div>
                {% for cat, events in categories_with_events %}
                <div class="tab-item">
                    <h3 class="title" style="margin: 20px 0 10px; text-transform: capitalize;">{{ cat.name }}</h3>
                    <div class="owl-carousel owl-theme tab-slider">
                        {% for event in events %}
                        <div class="item">
                            <div class="event-grid">
                                <div class="movie-thumb c-thumb">
                                    <a href="{% url 'event_detail' event.id %}">
                                        {% if event.image %}
                                            <img src="{{ event.image.url }}" alt="{{ event.name }}">
                                        {% elif event.image_url %}
                                            <img src="{{ event.image_url }}" alt="{{ event.name }}">
                                        {% else %}
                                            <img src="https://pixner.net/boleto/demo/assets/images/event/event01.jpg" alt="{{ event.name }}">
                                        {% endif %}
                                    </a>
                                    <div class="event-date">
                                        <h6 class="date-title">{{ event.date|date:"d" }}</h6>
                                        <span>{{ event.date|date:"M" }}</span>
                                    </div>
                                </div>
                                <div class="movie-content bg-one">
                                    <h5 class="title m-0">
                                        <a href="{% url 'event_detail' event.id %}">{{ event.name }}</a>
                                    </h5>
                                    <div class="movie-rating-percent">
                                        <span>{{ event.location }}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% empty %}
                        <p class="no-events">No events in {{ cat.name }}.</p>
                        {% endfor %}
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</section>
<!-- ==========Event-Section========== -->

<!-- ========== Dynamic Categories Section ========== -->
{% for category, events in categories_with_events %}
<section class="sports-section padding-top padding-bottom">
    <div class="container">
        <div class="section-header-2">
            <div class="left">
                <h2 class="title">{{ category.name }}</h2>
                <p>Be sure not to miss these {{ category.name }} events today.</p>
            </div>
        </div>

        <div class="owl-carousel owl-theme tab-slider">
            {% for event in events %}
            <div class="item">
                <div class="movie-grid">
                    <div class="movie-thumb c-thumb">
                        <a href="{% url 'event_detail' event.id %}">
                            {% if event.image %}
                                <img src="{{ event.image.url }}" alt="{{ event.name }}">
                            {% elif event.image_url %}
                                <img src="{{ event.image_url }}" alt="{{ event.name }}">
                            {% else %}
                                <img src="https://pixner.net/boleto/demo/assets/images/event/event01.jpg" alt="{{ event.name }}">
                            {% endif %}
                        </a>
                        <div class="event-date">
                            <h6 class="date-title">{{ event.date|date:"d" }}</h6>
                            <span>{{ event.date|date:"M" }}</span>
                        </div>
                    </div>
                    <div class="movie-content bg-one">
                        <h5 class="title m-0">
                            <a href="{% url 'event_detail' event.id %}">{{ event.name }}</a>
                        </h5>
                        <div class="movie-rating-percent">
                            <span>{{ event.location }}</span>
                        </div>
                    </div>
                </div>
            </div>
            {% empty %}
            <p class="no-events">No events available in {{ category.name }}.</p>
            {% endfor %}
        </div>
    </div>
</section>
{% endfor %}
<!-- ========== Dynamic Categories Section ========== -->

{% block extra_js %}
<script>
    $(document).ready(function() {
        // Initialize all owl-carousel sliders
        $('.owl-carousel').each(function() {
            $(this).owlCarousel({
                loop: true,
                margin: 30,
                nav: false,
                dots: false,
                autoplay: true,
                autoplayTimeout: 5000,
                responsive: {
                    0: {
                        items: 1
                    },
                    576: {
                        items: 2
                    },
                    992: {
                        items: 3
                    }
                }
            });
        });
    });
</script>
{% endblock %}

{% endblock %}
