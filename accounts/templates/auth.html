{% extends 'base.html' %}
{% comment %} {% block title %}SeatScape - Login / Sign Up{% endblock %} {% endcomment %}
{% block content %}
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600&display=swap" rel="stylesheet">
    
    <div class="container">
        <h2>Welcome</h2>
        
        {% if messages %}
        <ul class="messages">
            {% for message in messages %}
            <li class="{% if message.tags == 'success' %}success{% endif %}">
                {% if message.tags == 'success' %}
                    <i class="fas fa-check-circle"></i>
                {% else %}
                    <i class="fas fa-exclamation-circle"></i>
                {% endif %}
                {{ message }}
            </li>
            {% endfor %}
        </ul>
        {% endif %}
        
        <div class="tabs">
            <div class="tab active" id="tab-login">Login</div>
            <div class="tab" id="tab-signup">Sign Up</div>
        </div>
        {% comment %} 
        <!-- Login Form -->
        <form id="form-login" method="post">
            {% csrf_token %}
            <input type="hidden" name="action" value="login">
            {% if request.GET.next %}
            <input type="hidden" name="next" value="{{ request.GET.next }}">
            {% endif %}
            
            <label for="username">Username</label>
            <input type="text" placeholder="Enter Username" id="username" name="username" required>
            
            <label for="password">Password</label>
            <input type="password" placeholder="Password" id="password" name="password" required>
            
            <button type="submit">Log In</button>
            
            <div class="forget-password">
                <a href="{% url 'forget_password' %}">Forgot Password?</a>
            </div>
            
            <p style="text-align: center; margin-top: 16px;">
                No account? <a href="#" onclick="activate('signup'); return false;">Sign Up</a>
            </p>
        </form> {% endcomment %}

    <!-- ==========Sign-In-Section========== -->
    <section class="account-section bg_img" data-background="./assets/images/account/account-bg.jpg">
        <div class="container">
            <div class="padding-top padding-bottom">
                <div class="account-area">
                    <div class="section-header-3">
                        <span class="cate">welcome</span>
                        <h2 class="title">to Boleto </h2>
                    </div>
                    <form id="form-login" method="post" class="account-form">
                        {% csrf_token %}
                        <input type="hidden" name="action" value="login">
                        {% if request.GET.next %}
                        <input type="hidden" name="next" value="{{ request.GET.next }}">
                        {% endif %}
                    
                        <div class="form-group">
                            <label for="username">Username <span>*</span></label>
                            <input type="text" placeholder="Enter Username" id="username" name="username" required>
                        </div>
                    
                        <div class="form-group">
                            <label for="password">Password <span>*</span></label>
                            <input type="password" placeholder="Password" id="password" name="password" required>
                        </div>
                    
                        <div class="form-group text-center">
                            <button type="submit" class="btn">Log In</button>
                        </div>
                    
                        <div class="form-group forget-password text-center">
                            <a href="{% url 'forget_password' %}">Forgot Password?</a>
                        </div>
                    
                        <p style="text-align: center; margin-top: 16px;">
                            No account? <a href="#" onclick="activate('signup'); return false;">Sign Up</a>
                        </p>
                    </form>                    
                            <div class="option">
            Already have an account? <a href="#" onclick="activate('login'); return false;">Login</a>
        </div>
                    <div class="or"><span>Or</span></div>
                    <ul class="social-icons">
                        <li>
                            <a href="https://facebook.com" target="_blank">
                                <i class="fab fa-facebook-f"></i>
                            </a>
                        </li>
                        <li>
                            <a href="https://twitter.com" target="_blank">
                                <i class="fab fa-twitter"></i>
                            </a>
                        </li>
                        <li>
                            <a href="https://google.com" target="_blank">
                                <i class="fab fa-google"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

















        
        
        <!-- Signup Form -->
        <form id="form-signup" method="post" class="hidden">
            {% csrf_token %}
            <input type="hidden" name="action" value="signup">
            {% if request.GET.next %}
            <input type="hidden" name="next" value="{{ request.GET.next }}">
            {% endif %}
            
            <label for="signup-username">Username</label>
            <input type="text" placeholder="Username" name="username" id="signup-username" required>
            
            <label for="email">Email</label>
            <input type="email" placeholder="Email" name="email" id="email" required>
            
            <label for="password1">Password</label>
            <input type="password" placeholder="Password" id="password1" name="password1" required>
            
            <label for="password2">Confirm Password</label>
            <input type="password" placeholder="Confirm Password" id="password2" name="password2" required>
            
            <button type="submit">Create Account</button>
            
            <p style="text-align: center; margin-top: 16px;">
                Already have an account? <a href="#" onclick="activate('login'); return false;">Login</a>
            </p>
        </form>
        
        <!-- Social Login -->
        <div class="social-login">
            <p style="margin-bottom: 15px; color: #ccc; font-size: 14px;">Or continue with</p>
            <a href="#" class="social-btn google">
                <i class="fab fa-google"></i> Continue with Google
            </a>
        </div>
    </div>
    </div>

    <script>
        const tabLogin = document.getElementById('tab-login');
        const tabSignup = document.getElementById('tab-signup');
        const formLogin = document.getElementById('form-login');
        const formSignup = document.getElementById('form-signup');

        function activate(tab) {
            if (tab === 'login') {
                tabLogin.classList.add('active');
                tabSignup.classList.remove('active');
                formLogin.classList.remove('hidden');
                formSignup.classList.add('hidden');
            } else {
                tabSignup.classList.add('active');
                tabLogin.classList.remove('active');
                formSignup.classList.remove('hidden');
                formLogin.classList.add('hidden');
            }
        }

        tabLogin.addEventListener('click', () => activate('login'));
        tabSignup.addEventListener('click', () => activate('signup'));
        
        // Set initial active tab based on context
        {% if active_tab == 'signup' %}
        activate('signup');
        {% endif %}
        
        // Auto-hide success messages after 5 seconds
        setTimeout(function() {
            const successMessages = document.querySelectorAll('.messages li.success');
            successMessages.forEach(function(msg) {
                msg.style.opacity = '0';
                setTimeout(function() {
                    msg.remove();
                }, 300);
            });
        }, 5000);
    </script>
{% endblock %}
